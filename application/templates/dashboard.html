{% load humanize %}
{% if request.user.profile.approve %}
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–®–∫–æ–ª—å–Ω–∞—è CRM –ü–∞–Ω–µ–ª—å</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f4f6fa;
      display: flex;
      flex-direction: row;
      min-height: 100vh;
    }

     .sidebar {
      width: 240px;
      background-color: #1e1e2f;
      color: white;
      padding: 2rem 1.5rem;
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
    }

    .sidebar h2 {
      font-size: 24px;
      margin-bottom: 2rem;
      text-align: center;
    }

    .menu {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .menu-link {
      display: block;
      background-color: #2a2a40;
      padding: 0.8rem 1rem;
      border-radius: 12px;
      color: white;
      text-decoration: none;
      font-weight: 500;
      transition: 0.3s ease;
    }

    .menu-link:hover {
      background-color: #3b3b5a;
      color: #ffcc00;
    }

    .menu-link.active {
      background-color: #4e73df;
      color: white;
    }

    /* Main content */
    .main {
      flex: 1;
      padding: 2rem;
    }



    header {
      margin-bottom: 2rem;
    }

    header h1 {
      font-size: 24px;
      color: #333;
    }

    .cards {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .card {
      background: white;
      padding: 1.5rem;
      border-radius: 16px;
      box-shadow: 0 0 10px rgba(0,0,0,0.08);
      flex: 1;
      min-width: 200px;
      text-align: center;
    }

    .card h3 {
      font-size: 16px;
      margin-bottom: 0.5rem;
    }

    .card p {
      font-size: 20px;
      font-weight: bold;
      color: #4e73df;
    }

    .actions {
      margin-bottom: 2rem;
    }

    .actions h2 {
      margin-bottom: 1rem;
      color: #333;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .btn {
      padding: 0.75rem 1.5rem;
      border: none;
      font-size: 14px;
      font-weight: 600;
      border-radius: 12px;
      cursor: pointer;
      transition: 0.3s ease;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
    }

    .btn.primary {
      background-color: #4e73df;
      color: white;
    }

    .btn.success {
      background-color: #1cc88a;
      color: white;
    }

    .btn.info {
      background-color: #36b9cc;
      color: white;
    }

    .btn.warning {
      background-color: #f6c23e;
      color: #333;
    }

    .btn:hover {
      opacity: 0.9;
      transform: translateY(-1px);
    }

    @media (max-width: 768px) {
      body {
        flex-direction: column;
      }

      .sidebar {
        width: 100%;
        height: auto;
        display: flex;
        flex-direction: row;
        overflow-x: auto;
        padding: 1rem;
      }

      .sidebar h2 {
        display: none;
      }

      .sidebar ul {
        display: flex;
        flex-direction: row;
        gap: 1.5rem;
        flex-wrap: wrap;
      }

      .main {
        padding: 1rem;
      }

      .card {
        min-width: 100%;
      }

      .button-group {
        flex-direction: column;
        align-items: stretch;
      }
    }
  </style>
</head>
<body>

  <div class="sidebar">
    <h2>üè´ –®–∫–æ–ª–∞CRM</h2>
    <nav class="menu">
      <a href="{% url 'dashboard' %}" class="menu-link active" >üè† –ü–∞–Ω–µ–ª—å</a>
       {% if request.user.profile.position == 'admin' %}
      <a href="{% url 'approve' %}" class="menu-link">üìÑ –ó–∞—è–≤–∫–∏</a>
      <a href="{% url 'report' %}" class="menu-link ">üìà –û—Ç—á–µ—Ç</a>
       <a href="{% url 'kassa' %}" class="menu-link   ">üìä –ö–∞—Å—Å–∞</a>
      <a href="{% url 'discount' %}" class="menu-link">üí∏ –°–∫–∏–¥–∫–∏</a>
         <a href="{% url 'warehouse' %}" class="menu-link ">üìÅ –°–∫–ª–∞–¥</a>
      <a href="{% url  'kitchen' %}" class="menu-link">üçΩÔ∏è –ö—É—Ö–Ω—è</a>
      <a href="{% url 'staff' %}" class="menu-link ">üë®‚Äçüè´ –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</a>
      <a href="{% url 'class' %}" class="menu-link ">üìö –ö–ª–∞—Å—Å—ã</a>
      <a href="{% url 'student' %}" class="menu-link">üéì –£—á–µ–Ω–∏–∫–∏</a>
      <a href="{% url 'archive' %}" class="menu-link">üóÑÔ∏è –ê—Ä—Ö–∏–≤</a>
      <a href="{% url 'logout' %}" class="menu-link">üö™ –í—ã–π—Ç–∏</a>
      {% elif request.user.profile.position == 'supplier' %}
      <a href="{% url 'warehouse' %}" class="menu-link ">üìÅ –°–∫–ª–∞–¥</a>
      <a href="{% url 'logout' %}" class="menu-link">üö™ –í—ã–π—Ç–∏</a>
      {% elif request.user.profile.position == 'HR' %}
      <a href="{% url 'staff' %}" class="menu-link ">üë®‚Äçüè´ –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</a>
      <a href="{% url 'class' %}" class="menu-link ">üìö –ö–ª–∞—Å—Å—ã</a>
      <a href="{% url 'student' %}" class="menu-link">üéì –£—á–µ–Ω–∏–∫–∏</a>
      <a href="{% url 'archive' %}" class="menu-link">üóÑÔ∏è –ê—Ä—Ö–∏–≤</a>
      <a href="{% url 'logout' %}" class="menu-link">üö™ –í—ã–π—Ç–∏</a>
      {% elif request.user.profile.position == 'chief' %}
     <a href="{% url  'kitchen' %}" class="menu-link">üçΩÔ∏è –ö—É—Ö–Ω—è</a>
      <a href="{% url 'logout' %}" class="menu-link">üö™ –í—ã–π—Ç–∏</a>


      {% endif %}

    </nav>
  </div>

  <div class="main">
    <header>
      <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{request.user.profile.name}}</h1>
      <p>üìÖ <span id="date"></span></p>
    </header>

    <section class="cards">
      <div class="card">
        <h3>–í—Å–µ–≥–æ —É—á–µ–Ω–∏–∫–æ–≤</h3>
        <p>{{student}}</p>
      </div>
        <div class="card">
        <h3>–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h3>
        <p>{{staff}}</p>
      </div>
      <div class="card">
        <h3>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</h3>
        <p>{{teacher}}</p>
      </div>
      {% if request.user.profile.position == 'admin' %}
      <div class="card">
        <h3>–î–æ—Ö–æ–¥ –∑–∞ –º–µ—Å—è—Ü</h3>
        <p>{{sum|intcomma}} —Å—É–º</p>
      </div>
      {% endif %}


    </section>

    <section class="actions">
      <h2>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
      <div class="button-group">
        <button class="btn primary" onclick="window.location.href='{% url 'student' %}'">‚ûï –î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–∞</button>
        <button class="btn success" onclick="window.location.href='{% url 'staff' %}'">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</button>
        {% if asd %}
        <button class="btn info" onclick="alert('–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞...')">üìä –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç</button> */
        <button class="btn warning" onclick="alert('–û—Ç–ø—Ä–∞–≤–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è...')">üí¨ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</button>
        {% endif %}
      </div>
    </section>
  </div>

  <script>
    const monthNames = ['—è–Ω–≤–∞—Ä—è', '—Ñ–µ–≤—Ä–∞–ª—è', '–º–∞—Ä—Ç–∞', '–∞–ø—Ä–µ–ª—è', '–º–∞—è', '–∏—é–Ω—è',
                        '–∏—é–ª—è', '–∞–≤–≥—É—Å—Ç–∞', '—Å–µ–Ω—Ç—è–±—Ä—è', '–æ–∫—Ç—è–±—Ä—è', '–Ω–æ—è–±—Ä—è', '–¥–µ–∫–∞–±—Ä—è'];
    const today = new Date();
    const formattedDate = `${today.getDate()} ${monthNames[today.getMonth()]} ${today.getFullYear()} –≥.`;
    document.getElementById("date").textContent = formattedDate;
  </script>

</body>
</html>


{% else %}
{% include 'waiting.html' %}
{% endif %}